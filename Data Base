DROP DATABASE IF EXISTS TINA_CAFE;
CREATE DATABASE TINA_CAFE;
USE TINA_CAFE;


CREATE TABLE proveedor(
id_proveedor int not null auto_increment primary key,
id_producto int, 
nombre VARCHAR(200),
telefono VARCHAR(200),
direccion VARCHAR(200),
email VARCHAR(200) UNIQUE
);

CREATE TABLE producto(
id_producto int not null auto_increment primary key,
nombre VARCHAR (200),
precio DECIMAL (10,2),
id_categoria_producto INT
);

CREATE TABLE categoria_producto(
id_categoria_producto int not null auto_increment primary key,
nombre_categoria VARCHAR(200),
descripcion VARCHAR(200)
);


CREATE TABLE cliente(
id_cliente int not null auto_increment primary key,
nombre VARCHAR (200),
email VARCHAR (200) UNIQUE,
telefono VARCHAR (200)
);

CREATE TABLE empleado(
id_empleado int not null auto_increment primary key,
nombre VARCHAR (200),
direccion VARCHAR (200),
email VARCHAR (200) UNIQUE,
telefono VARCHAR (100),
puesto VARCHAR (200)
);

CREATE TABLE orden(
id_orden int not null auto_increment primary key,
id_cliente INT,
id_producto INT,
id_empleado INT,
fecha DATE
);

CREATE TABLE pagos(
id_pagos int not null auto_increment primary key,
id_detalle_orden INT,
fecha DATE
);

CREATE TABLE detalle_orden(
id_detalle_orden int not null auto_increment primary key,
id_orden INT,
id_producto INT,
id_empleado INT, 
cantidades DECIMAL (10,2)
);

-- REFERENCIAS


ALTER TABLE
    producto 
    ADD  CONSTRAINT fk_constraint_id_categoria_producto
    FOREIGN KEY
    (id_categoria_producto ) REFERENCES categoria_producto (id_categoria_producto);
    
ALTER TABLE
    orden 
    ADD  CONSTRAINT fk_constraint_id_cliente
    FOREIGN KEY
    (id_cliente ) REFERENCES cliente (id_cliente);
    
ALTER TABLE
    orden 
    ADD  CONSTRAINT fk_constraint_id_producto	
    FOREIGN KEY
    (id_producto) REFERENCES producto (id_producto);
    
ALTER TABLE
    orden 
    ADD  CONSTRAINT fk_constraint_id_empleado	
    FOREIGN KEY
    (id_empleado) REFERENCES empleado (id_empleado);
    
ALTER TABLE
	pagos
    ADD  CONSTRAINT fk_constraint_id_detalle_orden	
    FOREIGN KEY
    (id_detalle_orden) REFERENCES detalle_orden (id_detalle_orden);
    
ALTER TABLE
	detalle_orden
    ADD  CONSTRAINT fk_constraint_id_orden	
    FOREIGN KEY
    (id_orden) REFERENCES orden (id_orden);
    
ALTER TABLE
	detalle_orden
    ADD  CONSTRAINT fk_d_constraint_id_producto	
    FOREIGN KEY
    (id_producto) REFERENCES producto (id_producto);	
    
ALTER TABLE
	detalle_orden
    ADD  CONSTRAINT fk_d_constraint_id_empleado	
    FOREIGN KEY
    (id_empleado) REFERENCES empleado (id_empleado);
    
ALTER TABLE
	proveedor
    ADD  CONSTRAINT fk_p_constraint_id_producto	
    FOREIGN KEY
    (id_producto) REFERENCES producto (id_producto);

insert into categoria_producto (nombre_categoria, descripcion)
VALUES 
('Bebidas', 'Bebidas como cafés, jugos y té.'),
('Comidas', 'Alimentos como cookies, buffins, barritas'),
('Snacks', 'Snacks como papas fritas y frutos secos');

insert into producto (nombre, precio, id_categoria_producto)
VALUES
('Cafe', 5000, 1),  -- Producto de la categoría "Bebidas"
('Te', 3000, 1),    -- Producto de la categoría "Bebidas"
('Limonada', 3000, 1), -- Producto de la categoría "Bebidas"
('Muffin', 5000, 2), -- Producto de la categoría "Comidas"
('Cookies', 3000, 2),    -- Producto de la categoría "Comidas"
('Barritas', 3000, 2),    -- Producto de la categoría "Comidas"
('Papas Fritas', 4000, 3),  -- Producto de la categoría "Snacks"
('Frutos secos', 4000, 3);  -- Producto de la categoría "Snacks"

insert into proveedor (id_producto, nombre, telefono, direccion, email)
VALUES
(1, 'Proveedor bebidas', '123456789', 'Calle 123', 'bebidas@gmail.com'),
(2, 'Proveedor comidas', '987654321', 'Calle 456', 'comidas@gmail.com'),
(3, 'Proveedor snacks', '555555555', 'Calle 789', 'snacks@gmail.com');

INSERT INTO cliente (nombre, email, telefono)
VALUES 
('Lucia Catro', 'castrolucia@gmail.com', '3001234567'),
('Manuela Baxovanos', 'manuela.bax@gmail.com', '3002345678'),
('Sebastian Negri', 'snegri@gmail.com', '3003456789');

INSERT INTO empleado (nombre, direccion, email, telefono, puesto)
VALUES 
('Tomas Bareto', 'Avenida 5', 'tomas.eduardo@tinacafe.com', '3004567890', 'Cajero'),
('Pablo Hernandez', 'Avenida 6', 'p.hernandez@tinacafe.com', '3005678901', 'Chef'),
('Santiago Degreef', 'Avenida 7', 'santiago.degreef@tinacafe.com', '3006789012', 'Mozo');

INSERT INTO orden (id_cliente, id_producto, id_empleado, fecha)
VALUES 
(1, 1, 3, '2024-11-01'),  -- Cliente 1, Producto Cafe, Empleado "Santiago Degreef", Fecha 1 de noviembre
(2, 2, 3, '2024-11-02'),  -- Cliente 2, Producto Muffin, Empleado "Santiago Degreef", Fecha 2 de noviembre
(3, 3, 3, '2024-11-03');  -- Cliente 3, Producto "Papas fritas", Empleado "Santiago Degreef", Fecha 3 de noviembre

INSERT INTO detalle_orden (id_orden, id_producto, id_empleado, cantidades)
VALUES 
(1, 1, 3, 1),  -- Orden 1, Producto "Café", Empleado "Santiago Degreef", Cantidad 1
(2, 2, 3, 2),  -- Orden 2, Producto "Muffin", Empleado "Santiago Degreef", Cantidad 2
(3, 3, 3, 3);  -- Orden 3, Producto "Papas fritas", Empleado "Santiago Degreef", Cantidad 3

INSERT INTO pagos (id_detalle_orden, fecha)
VALUES 
(1, '2024-11-01'),  -- Pago de la Orden 1
(2, '2024-11-02'),  -- Pago de la Orden 2
(3, '2024-11-03');  -- Pago de la Orden 3
